# System Design - I

- [Server Setups](#server-setups)   
- [Types of Databases](#types-of-databases)
- [Web Server Scaling](#web-server-scaling)
- [Load Balancer](#load-balancer)
- [Database Replication](#database-replication)
- [Caching](#caching)
- [CDN](#cdn)
- [Web Architectures - State & Stateless](#web-architecture---state--stateless)
- [Data Center & geoDNS](#data-center--geodns)
- [Message Queue](#message-queue)
- [Logging, metrics and automation](#logging-metrics-and-automation)
- [Database Scaling](#database-scaling) 

# Server Setups  
## Single Server Setup:
 ![Single Server Setup](./assets/1/single%20server.png)
 In this system the web server and the database are placed together.
## Multiple Server Setup:
![Multiple server setup](./assets/1/multiple%20server.png)
In This system the web server and the database is placed seperately.
# Types of Databases   
- __Relational Database__
- __Non-Relational Database__
# Web Server Scaling  
- __Vertical Scaling__    
    - Also know as up scaling.
    - When traffic is low.
    - Simplicity is its advantage.
    - Impossible to keep upgrading CPU & RAM.
    - If the server is crashed the entire system fails.
- __Horizontal Scaling__     
    - Also know as scaling out.
    - For large scale applications.
    - Easily handle large traffic.
    - Complex to design and sync data.

![web server scaling](./assets/1/web%20server%20scaling.png)
# Load Balancer
![Load Balancer](./assets/1/load%20balancer.png)
# Database Replication   
In Database Replication design, the entire data is stored on multiple databases to allow high and fast data availability. The famous database replication model is - `Master Slave Model`.   

| Master | Slave |  
| :------ | :----- |   
| Only Write Operation | Read Operation |
| INSERT, DELETE, UPDATE | gets copies of data from master |

![Db Replication](./assets/1/db%20replication.png)
# Caching
Cache is temporary storage and it stores.   
- Results of expensive operations.
- Frequently accessed data.   

![Cache](./assets/1/cache.png)
# CDN
`Content Delivery Network` is used to serve static contents like images, styles `css` files, scripts `js` files, etc.        
### Consideration while using CDN:  
- __Cost:__ cost of buying CDN server.   
- __Data Expire Time:__ Not too high, Not too low.   
- __CDN Fallback/Backup:__ proper backup for CDN content.   
- __Invalidating Files:__ Ways to stale CDN data/files.
    - API (provided by CDN vendor).
    - Versioning (eg. `image.png?v=2`).
- __Cost:__ cost of buying CDN server.   

![cdn](./assets/1/cdn.png)
# Web Architecture - State & Stateless
__Session Data/State:__ Data that represents user's session on web used for     
- identify a user.
- Authenticate the user.   

|  State-full  |  State-less  |  
| :----------  | :------------|  
|User session details are stored on server| No user session details stored|

# Data Center & geoDNS
`DNS` server resolve the domain names and provide IP addresses for their corresponding web servers or data centers. Now `geoDNS` provide IP address based on the location of the requesting user.   
### Consideration while using geoDNS servers:
- __Traffic re-direction:__ By default handle by the server itself.
- __Data Synchronization:__ Replicate data across multiple data centers.
- __Test and deployment:__ Properly test application at different locations.
# Message Queue
Modern world applications are designed on `microservice` architecture, which allows scalablity, maintainablity. Message queues provide communication and co-ordination for these microservices. It supports `Async Communication`.

|   Producer    |   Consumer    |
|   :------     |   :-------    |
| Producer can produce a message to queue even when the consumer is unavailable. | Consumer can read message from the queue even when producer is unavailable.
# Logging, Metrics and Automation
### Logging:
- monitoring error logs.
- per server level.
- centralized logging.
- eg. `New Relic`
### Metrics:
- gain business insights.
- aware of health of our server.
- host level metrics: `CPU`, `memory`.
- aggregated level metrics: Performance of DB, cache, etc.
- key business metrics: daily active users, revenue, etc.
- eg. `Grafane`
### Automation:
- helpful when system/application gets big & complex.
- improve productivity.
- continuous integration, eg. code check-in verification through automation.
- automating building, test and deployment, etc.
- eg. `Jukins Jobs`
# Database Scaling